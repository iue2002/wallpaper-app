<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="App1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="å°Kå£çº¸">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <!-- ç®€åŒ–ç‰ˆä¸»ç•Œé¢ -->
        <Grid.RowDefinitions>
            <RowDefinition x:Name="TitleBarRow" Height="0"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- è‡ªå®šä¹‰æ ‡é¢˜æ åŒºåŸŸ -->
        <Grid Grid.Row="0" x:Name="CustomTitleBar" Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="140"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="15" Padding="15,0" VerticalAlignment="Center">
                <TextBlock Text="å°Kå£çº¸" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>
        
        <!-- å£çº¸ç½‘æ ¼åŒºåŸŸ -->
        <Grid Grid.Row="1">
            <!-- é€šçŸ¥æ  (å·¦ä¸‹è§’) - ç®€æ´é£Žæ ¼ -->
            <Border x:Name="NotificationBar"
                    Visibility="Collapsed"
                    Background="#2D2D2D"
                    CornerRadius="8"
                    Padding="16,12"
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Left"
                    Margin="20"
                    MinWidth="280"
                    MaxWidth="400"
                    Canvas.ZIndex="999">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- è¿›åº¦åœˆ (åŠ è½½ä¸­) -->
                    <ProgressRing x:Name="NotificationProgress"
                                 Grid.Column="0"
                                 Width="20"
                                 Height="20"
                                 Visibility="Collapsed"
                                 Margin="0,0,12,0"/>
                    
                    <!-- æˆåŠŸå›¾æ ‡ -->
                    <Viewbox x:Name="NotificationSuccessIcon"
                            Grid.Column="0"
                            Width="20"
                            Height="20"
                            Visibility="Collapsed"
                            Margin="0,0,12,0">
                        <SymbolIcon Symbol="Accept" Foreground="#4CAF50"/>
                    </Viewbox>
                    
                    <!-- é”™è¯¯å›¾æ ‡ -->
                    <Viewbox x:Name="NotificationErrorIcon"
                            Grid.Column="0"
                            Width="20"
                            Height="20"
                            Visibility="Collapsed"
                            Margin="0,0,12,0">
                        <SymbolIcon Symbol="Cancel" Foreground="#F44336"/>
                    </Viewbox>
                    
                    <!-- å‹¾é€‰æ¡†ï¼ˆä»…æˆåŠŸæ—¶æ˜¾ç¤ºï¼‰ -->
                    <CheckBox x:Name="NotificationCheckBox"
                             Grid.Column="1"
                             IsChecked="True"
                             IsEnabled="False"
                             Visibility="Collapsed"
                             Margin="0,0,8,0"
                             Foreground="#4CAF50"/>
                    
                    <!-- æ¶ˆæ¯æ–‡æœ¬ -->
                    <TextBlock x:Name="NotificationText"
                              Grid.Column="2"
                              Text="æ¶ˆæ¯"
                              FontSize="14"
                              Foreground="White"
                              VerticalAlignment="Center"
                              TextWrapping="Wrap"/>
                    
                    <!-- å…³é—­æŒ‰é’® -->
                    <Button x:Name="NotificationCloseButton"
                           Grid.Column="3"
                           Content="&#xE711;"
                           FontFamily="Segoe MDL2 Assets"
                           FontSize="12"
                           Width="24"
                           Height="24"
                           Margin="12,0,0,0"
                           Background="Transparent"
                           BorderThickness="0"
                           Foreground="#999999"
                           Click="NotificationCloseButton_Click"
                           VerticalAlignment="Center">
                        <Button.Resources>
                            <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="Transparent"/>
                            <SolidColorBrush x:Key="ButtonBackgroundPressed" Color="Transparent"/>
                        </Button.Resources>
                    </Button>
                </Grid>
                <Border.Shadow>
                    <ThemeShadow />
                </Border.Shadow>
            </Border>
            
            <!-- åŠ è½½ä¸­æç¤º -->
            <StackPanel x:Name="LoadingPanel" 
                        Visibility="Collapsed"
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Spacing="15">
                <ProgressRing IsActive="True" Width="50" Height="50"/>
                <TextBlock Text="æ­£åœ¨åŠ è½½å£çº¸..." FontSize="16"/>
            </StackPanel>
            
            <!-- è®¾ç½®å£çº¸è¿›åº¦æç¤ºï¼ˆå·¦ä¸‹è§’å°åž‹ï¼‰ -->
            <Border x:Name="SettingWallpaperPanel"
                    Visibility="Collapsed"
                    Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}"
                    CornerRadius="8"
                    Padding="15,10"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Bottom"
                    Margin="20,0,0,80"
                    Canvas.ZIndex="998">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <ProgressRing IsActive="True" Width="20" Height="20"/>
                    <TextBlock Text="æ­£åœ¨è®¾ç½®å£çº¸..." 
                               FontSize="13"
                               VerticalAlignment="Center"/>
                </StackPanel>
                <Border.Shadow>
                    <ThemeShadow />
                </Border.Shadow>
            </Border>
            
            <!-- ç©ºçŠ¶æ€æç¤º -->
            <StackPanel x:Name="EmptyPanel" 
                        Visibility="Collapsed"
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        Spacing="15">
                <TextBlock Text="ðŸ“·" FontSize="64"/>
                <TextBlock Text="æš‚æ— å£çº¸ï¼Œç‚¹å‡»åˆ·æ–°èŽ·å–" FontSize="18"/>
                <Button Content="åˆ·æ–°èŽ·å–" Click="btnRefresh_Click"/>
            </StackPanel>
            
            <!-- å£çº¸ç½‘æ ¼ -->
            <ScrollViewer x:Name="WallpaperScrollViewer" 
                          Visibility="Collapsed"
                          ViewChanged="WallpaperScrollViewer_ViewChanged">
                <StackPanel>
                    <GridView x:Name="WallpaperGridView"
                              SelectionMode="None"
                              IsItemClickEnabled="False"
                              HorizontalAlignment="Center"
                              Padding="20">
                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsWrapGrid Orientation="Horizontal" 
                                               HorizontalAlignment="Center"/>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
                        
                        <GridView.ItemTemplate>
                            <DataTemplate>
                                <Grid Width="280" Height="200" 
                                      Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                      CornerRadius="8"
                                      BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                      BorderThickness="1"
                                      Margin="10"
                                      Tapped="WallpaperGridItem_Tapped"
                                      DoubleTapped="WallpaperItem_DoubleTapped"
                                      RightTapped="WallpaperGridItem_RightTapped"
                                      PointerEntered="WallpaperGridItem_PointerEntered"
                                      PointerExited="WallpaperGridItem_PointerExited"
                                      RenderTransformOrigin="0.5,0.5">
                                    <Grid.RenderTransform>
                                        <ScaleTransform x:Name="gridScale" ScaleX="1" ScaleY="1"/>
                                    </Grid.RenderTransform>
                                    
                                    <!-- å³é”®èœå• -->
                                    <Grid.ContextFlyout>
                                        <MenuFlyout Opening="ContextMenu_Opening">
                                            <MenuFlyoutItem Text="è®¾ä¸ºæ¡Œé¢èƒŒæ™¯" Click="SetAsDesktopWallpaper_Click">
                                                <MenuFlyoutItem.Icon>
                                                    <FontIcon Glyph="&#xE91B;" />
                                                </MenuFlyoutItem.Icon>
                                            </MenuFlyoutItem>
                                            <MenuFlyoutItem Text="è®¾ä¸ºé”å±ç•Œé¢" Click="SetAsLockScreen_Click">
                                                <MenuFlyoutItem.Icon>
                                                    <FontIcon Glyph="&#xE72E;" />
                                                </MenuFlyoutItem.Icon>
                                            </MenuFlyoutItem>
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutSubItem Text="æ¡Œé¢èƒŒæ™¯å®šæ—¶åˆ‡æ¢">
                                                <MenuFlyoutSubItem.Icon>
                                                    <FontIcon Glyph="&#xE916;" />
                                                </MenuFlyoutSubItem.Icon>
                                                <MenuFlyoutItem Text="å…³é—­è‡ªåŠ¨æ›´æ¢" Tag="0" Click="SetDesktopTimerInterval_Click" />
                                                <MenuFlyoutSeparator />
                                                <MenuFlyoutSeparator />
                                                <MenuFlyoutItem Text="æ¯1å°æ—¶" Tag="60" Click="SetDesktopTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯2å°æ—¶" Tag="120" Click="SetDesktopTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯6å°æ—¶" Tag="360" Click="SetDesktopTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯12å°æ—¶" Tag="720" Click="SetDesktopTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯1å¤©" Tag="1440" Click="SetDesktopTimerInterval_Click" />
                                            </MenuFlyoutSubItem>
                                            <MenuFlyoutSubItem Text="é”å±ç•Œé¢å®šæ—¶åˆ‡æ¢">
                                                <MenuFlyoutSubItem.Icon>
                                                    <FontIcon Glyph="&#xE916;" />
                                                </MenuFlyoutSubItem.Icon>
                                                <MenuFlyoutItem Text="å…³é—­è‡ªåŠ¨æ›´æ¢" Tag="0" Click="SetLockScreenTimerInterval_Click" />
                                                <MenuFlyoutSeparator />
                                                <MenuFlyoutSeparator />
                                                <MenuFlyoutItem Text="æ¯1å°æ—¶" Tag="60" Click="SetLockScreenTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯2å°æ—¶" Tag="120" Click="SetLockScreenTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯6å°æ—¶" Tag="360" Click="SetLockScreenTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯12å°æ—¶" Tag="720" Click="SetLockScreenTimerInterval_Click" />
                                                <MenuFlyoutItem Text="æ¯1å¤©" Tag="1440" Click="SetLockScreenTimerInterval_Click" />
                                            </MenuFlyoutSubItem>
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutItem x:Name="GridStartupMenuItem" Text="å¼€æœºå¯åŠ¨" Click="ToggleStartup_Click">
                                                <MenuFlyoutItem.Icon>
                                                    <FontIcon Glyph="&#xE7B7;" />
                                                </MenuFlyoutItem.Icon>
                                            </MenuFlyoutItem>
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutItem Text="ä¸‹è½½æ­¤å›¾ç‰‡" Click="DownloadImage_Click">
                                                <MenuFlyoutItem.Icon>
                                                    <FontIcon Glyph="&#xE896;" />
                                                </MenuFlyoutItem.Icon>
                                            </MenuFlyoutItem>
                                            <MenuFlyoutItem x:Name="GridClearCacheMenuItem" Text="æ¸…ç†ç¼“å­˜" Click="ClearCache_Click" Visibility="Collapsed">
                                                <MenuFlyoutItem.Icon>
                                                    <FontIcon Glyph="&#xE74D;" />
                                                </MenuFlyoutItem.Icon>
                                            </MenuFlyoutItem>
                                        </MenuFlyout>
                                    </Grid.ContextFlyout>
                                    
                                    <!-- ç¼©ç•¥å›¾ -->
                                    <Image Stretch="UniformToFill" 
                                           Loaded="GridImage_Loaded"
                                           ImageOpened="GridImage_Opened"/>
                                    
                                    <!-- åº•éƒ¨ä¿¡æ¯æ  -->
                                    <Grid VerticalAlignment="Bottom" 
                                          Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}"
                                          Padding="12,8">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Title}" 
                                                       FontSize="14" 
                                                       FontWeight="SemiBold"
                                                       TextTrimming="CharacterEllipsis"
                                                       MaxLines="1"/>
                                            <TextBlock Text="{Binding Copyright}" 
                                                       FontSize="11" 
                                                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                       TextTrimming="CharacterEllipsis"
                                                       MaxLines="1"
                                                       Margin="0,2,0,0"/>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                            </DataTemplate>
                        </GridView.ItemTemplate>
                    </GridView>
                    
                    <!-- åº•éƒ¨åŠ è½½æç¤º -->
                    <StackPanel x:Name="txtLoadingMore" 
                                Visibility="Collapsed"
                                HorizontalAlignment="Center"
                                Padding="20"
                                Spacing="10"
                                Orientation="Horizontal">
                        <ProgressRing IsActive="True" Width="24" Height="24"/>
                        <TextBlock Text="åŠ è½½ä¸­..." 
                                   FontSize="14"
                                   VerticalAlignment="Center"
                                   Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>
            
            <!-- æ²‰æµ¸å¼æµè§ˆæ¨¡å¼ -->
            <FlipView x:Name="ImmersiveFlipView"
                      Visibility="Visible"
                      PointerWheelChanged="ImmersiveFlipView_PointerWheelChanged"
                      Background="{ThemeResource LayerFillColorDefaultBrush}">
                <FlipView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel />
                    </ItemsPanelTemplate>
                </FlipView.ItemsPanel>
                <FlipView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
                            <ProgressRing x:Name="LoadingRing"
                                         IsActive="True"
                                         Width="40"
                                         Height="40"
                                         HorizontalAlignment="Center"
                                         VerticalAlignment="Center"/>
                            
                            <!-- çº¯å‡€å…¨å±å¤§å›¾ï¼Œä½¿ç”¨åŽŸå§‹åˆ†è¾¨çŽ‡ï¼ˆä¼˜å…ˆFullUrlï¼Œå¤‡ç”¨ThumbUrlï¼‰ -->
                            <Image x:Name="ImmersiveImage"
                                   Stretch="UniformToFill"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Opacity="0"
                                   DoubleTapped="ImmersiveImage_DoubleTapped"
                                   Loaded="ImmersiveImage_Loaded"
                                   ImageOpened="ImmersiveImage_Opened"
                                   RightTapped="ImmersiveImage_RightTapped">
                                <Image.ContextFlyout>
                                    <MenuFlyout Opening="ContextMenu_Opening">
                                        <MenuFlyoutItem Text="è®¾ä¸ºæ¡Œé¢èƒŒæ™¯" Click="SetAsDesktopWallpaper_Click">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE91B;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutItem Text="è®¾ä¸ºé”å±ç•Œé¢" Click="SetAsLockScreen_Click">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE72E;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutSeparator />
                                        <MenuFlyoutSubItem Text="æ¡Œé¢èƒŒæ™¯å®šæ—¶åˆ‡æ¢">
                                            <MenuFlyoutSubItem.Icon>
                                                <FontIcon Glyph="&#xE916;" />
                                            </MenuFlyoutSubItem.Icon>
                                            <MenuFlyoutItem Text="å…³é—­è‡ªåŠ¨æ›´æ¢" Tag="0" Click="SetDesktopTimerInterval_Click" />
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutItem Text="æ¯1å°æ—¶" Tag="60" Click="SetDesktopTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯2å°æ—¶" Tag="120" Click="SetDesktopTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯6å°æ—¶" Tag="360" Click="SetDesktopTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯12å°æ—¶" Tag="720" Click="SetDesktopTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯1å¤©" Tag="1440" Click="SetDesktopTimerInterval_Click" />
                                        </MenuFlyoutSubItem>
                                        <MenuFlyoutSubItem Text="é”å±ç•Œé¢å®šæ—¶åˆ‡æ¢">
                                            <MenuFlyoutSubItem.Icon>
                                                <FontIcon Glyph="&#xE916;" />
                                            </MenuFlyoutSubItem.Icon>
                                            <MenuFlyoutItem Text="å…³é—­è‡ªåŠ¨æ›´æ¢" Tag="0" Click="SetLockScreenTimerInterval_Click" />
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutItem Text="æ¯1å°æ—¶" Tag="60" Click="SetLockScreenTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯2å°æ—¶" Tag="120" Click="SetLockScreenTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯6å°æ—¶" Tag="360" Click="SetLockScreenTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯12å°æ—¶" Tag="720" Click="SetLockScreenTimerInterval_Click" />
                                            <MenuFlyoutItem Text="æ¯1å¤©" Tag="1440" Click="SetLockScreenTimerInterval_Click" />
                                        </MenuFlyoutSubItem>
                                        <MenuFlyoutSeparator />
                                        <MenuFlyoutItem x:Name="StartupMenuItem" Text="å¼€æœºå¯åŠ¨" Click="ToggleStartup_Click">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE7B7;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutSeparator />
                                        <MenuFlyoutItem Text="ä¸‹è½½æ­¤å›¾ç‰‡" Click="DownloadImage_Click">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE896;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                        <MenuFlyoutItem x:Name="ClearCacheMenuItem" Text="æ¸…ç†ç¼“å­˜" Click="ClearCache_Click" Visibility="Collapsed">
                                            <MenuFlyoutItem.Icon>
                                                <FontIcon Glyph="&#xE74D;" />
                                            </MenuFlyoutItem.Icon>
                                        </MenuFlyoutItem>
                                    </MenuFlyout>
                                </Image.ContextFlyout>
                            </Image>
                        </Grid>
                    </DataTemplate>
                </FlipView.ItemTemplate>
            </FlipView>
            
            <!-- æ²‰æµ¸å¼æ¨¡å¼ - å·¦ä¸‹è§’åŠ è½½è¿›åº¦æ¡ -->
            <ProgressBar x:Name="ImmersiveLoadingIndicator"
                         IsIndeterminate="True"
                         Width="100"
                         Height="4"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Bottom"
                         Margin="20,20,20,80"
                         Visibility="Collapsed"
                         Canvas.ZIndex="999"/>
            
            <!-- å·¦ä¸‹è§’ Toast é€šçŸ¥ -->
            <Grid x:Name="ToastNotification"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Bottom"
                  Margin="20"
                  Visibility="Collapsed"
                  Canvas.ZIndex="1000">
                <!-- é˜´å½±å±‚ -->
                <Border Background="#40000000"
                        CornerRadius="8"
                        Margin="0,2,0,-2"/>
                
                <!-- å†…å®¹å±‚ -->
                <Border Background="#E62D2D2D"
                        CornerRadius="8"
                        Padding="20,12">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon x:Name="ToastIcon"
                                  Glyph="&#xE73E;"
                                  FontSize="20"
                                  Foreground="#4CAF50"/>
                        <TextBlock x:Name="ToastMessage"
                                   Text="æ“ä½œæˆåŠŸ"
                                   FontSize="14"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- å¯åŠ¨ç”»é¢è¦†ç›–å±‚ -->
            <Grid x:Name="SplashScreen"
                  Background="#1E1E1E"
                  Canvas.ZIndex="9999"
                  Visibility="Visible">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Logo å’Œæ ‡é¢˜ -->
                <StackPanel Grid.Row="0" 
                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center"
                            Spacing="30">
                    
                    <!-- Logo å›¾ç‰‡ (1240x600ï¼Œä¿æŒ2:1æ¯”ä¾‹) -->
                    <Image Source="Assets/SplashScreen.scale-200.png"
                           Width="600"
                           Height="300"
                           Stretch="Uniform"/>
                    
                    <!-- åº”ç”¨åç§° -->
                    <TextBlock Text="å°Kå£çº¸"
                               FontSize="32"
                               FontWeight="SemiBold"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    
                    <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
                    <TextBlock Text="v1.0.0"
                               FontSize="14"
                               Foreground="#888888"
                               HorizontalAlignment="Center"/>
                    
                    <!-- å¼€å‘è€…ä¿¡æ¯ -->
                    <TextBlock Text="å¼€å‘è€…ï¼šéº¦éº¦æè‰¾åŠ›"
                               FontSize="12"
                               Foreground="#666666"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"/>
                </StackPanel>
                
                <!-- åŠ è½½è¿›åº¦æ¡ -->
                <StackPanel Grid.Row="1" 
                            Margin="0,0,0,40"
                            HorizontalAlignment="Center"
                            Spacing="10">
                    <ProgressRing IsActive="True"
                                 Width="30"
                                 Height="30"
                                 Foreground="#FF6A00"/>
                    <TextBlock Text="æ­£åœ¨åŠ è½½..."
                               FontSize="12"
                               Foreground="#AAAAAA"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
            
            <!-- å³ä¸‹è§’åˆ‡æ¢æ¨¡å¼æŒ‰é’® -->
            <Button x:Name="btnToggleViewMode"
                    Content="&#xE8A9;"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="20"
                    Width="56"
                    Height="56"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Margin="20"
                    Click="btnToggleViewMode_Click"
                    ToolTipService.ToolTip="åˆ‡æ¢åˆ°ç½‘æ ¼æ¨¡å¼"
                    Opacity="0.3"
                    PointerEntered="btnToggleViewMode_PointerEntered"
                    PointerExited="btnToggleViewMode_PointerExited"
                    Canvas.ZIndex="1000">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="#FF6A00"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Grid x:Name="RootGrid" 
                                          Background="{TemplateBinding Background}"
                                          CornerRadius="28">
                                        <ContentPresenter x:Name="ContentPresenter"
                                                        Content="{TemplateBinding Content}"
                                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="Normal"/>
                                                <VisualState x:Name="PointerOver"/>
                                                <VisualState x:Name="Pressed">
                                                    <VisualState.Setters>
                                                        <Setter Target="RootGrid.Background" Value="#E55A00"/>
                                                    </VisualState.Setters>
                                                </VisualState>
                                                <VisualState x:Name="Disabled">
                                                    <VisualState.Setters>
                                                        <Setter Target="RootGrid.Opacity" Value="0.5"/>
                                                    </VisualState.Setters>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
                <Button.Shadow>
                    <ThemeShadow />
                </Button.Shadow>
            </Button>
            
            <!-- å…¨å±å›¾ç‰‡æŸ¥çœ‹å™¨è¦†ç›–å±‚ -->
            <Grid x:Name="FullScreenImageViewer"
                  Visibility="Collapsed"
                  Background="#CC000000"
                  Canvas.ZIndex="9999"
                  Tapped="FullScreenImageViewer_Tapped">
                <!-- å…¨å±å›¾ç‰‡ -->
                <Image x:Name="FullScreenImage"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
                
                <!-- å…³é—­æç¤ºï¼ˆå³ä¸Šè§’ï¼‰ -->
                <TextBlock Text="ç‚¹å‡»ä»»æ„ä½ç½®å…³é—­"
                           FontSize="14"
                           Foreground="White"
                           Opacity="0.7"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Top"
                           Margin="20"/>
                
                <!-- å›¾ç‰‡ä¿¡æ¯ï¼ˆåº•éƒ¨ï¼‰ -->
                <Border Background="#AA000000"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Bottom"
                        Padding="20,15">
                    <StackPanel>
                        <TextBlock x:Name="FullScreenTitle"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="White"
                                   TextWrapping="Wrap"/>
                        <TextBlock x:Name="FullScreenCopyright"
                                   FontSize="12"
                                   Foreground="#CCFFFFFF"
                                   Margin="0,5,0,0"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window>
